<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>JS CallBack, Promise and Async/Await</title>
  <script>
    // Promise, Async/Await 的主程式
    function add(n1, n2){
      let promise = new Promise(function(resolve, reject){
        window.setTimeout(function(){
          resolve(n1 + n2);
        }, 2000)
      });
      return promise;
    }

    // Async/Await Way
    async function asyncFunc(){
      let result = await add(2, 2);
      console.log(await result);
      let secondResult = await add(result,2);
      console.log(await secondResult);
      let finalResult = await add(secondResult, 2);
      console.log(await finalResult);
    }
    asyncFunc();
    
    // Promise Way
    add(2, 2).then(function(result){
      console.log(result);
      return add(result, 2).then(function(secondResult){
        console.log(secondResult);
        return add(secondResult, 2).then(function(finalResult){
          console.log(finalResult);
        });
      });
    });
    
    // CallBack
    function addCb(n1, n2, callback){
      window.setTimeout(function(){
        callback(n1 + n2);
      }, 2000)
    }
    addCb(2, 2, function(result){
      console.log(result);
      addCb(result, 2,function(secondResult){
        console.log(secondResult);
        addCb(secondResult, 2, function(fianlResult){
          console.log(fianlResult);
        });
      });
    });
  </script>
</head>
<body>
  
</body>
</html>